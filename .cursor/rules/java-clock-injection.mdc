---
description: Enforce java.time.Clock injection for time travel
globs: *.java
---

# Clock Injection (Java)

## Description

To support deterministic backtesting ("Time Travel"), strict abstraction of the system clock is required.

## Rules

1.  **Forbidden Static Time**:

    - `System.currentTimeMillis()`, `Instant.now()`, `new Date()` are **STRICTLY FORBIDDEN**.

2.  **Injection Requirement**:

    - Time-sensitive Components must inject `private final Clock clock;`.

3.  **Usage**:

    - _Correct_: `Instant.now(clock)`.

4.  **Testing**:
    - Use `Clock.fixed()` in tests; `SimulatedClock` for backtesting.
